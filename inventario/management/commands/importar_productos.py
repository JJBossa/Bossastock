from django.core.management.base import BaseCommand
from inventario.models import Producto
import re

class Command(BaseCommand):
    help = 'Importa productos desde una lista de datos'

    def handle(self, *args, **options):
        # Datos extraídos del PDF
        productos_data = [
            ("alto azul reservado 40°", 13900, 10),
            ("alto blanco corcho", 15900, 10),
            ("alto café", 13900, 10),
            ("alto gris sin corcho", 13900, 10),
            ("alto litro normal", 11900, 10),
            ("alto negro corcho", 15900, 10),
            ("alto verde corcho", 15900, 10),
            ("amarula", 19500, 10),
            ("andino mango", 6900, 10),
            ("andino sour", 6900, 10),
            ("aquarius variedad 1.5", 1500, 10),
            ("aromo caja", 3000, 10),
            ("austral calafate 500cc", 2200, 10),
            ("austral calafate fourpack", 8500, 10),
            ("bacardi coconut", 7900, 10),
            ("bacardi daiquiri", 7900, 10),
            ("bacardi mango", 7900, 10),
            ("bacardi manzana", 7900, 10),
            ("baileys", 19500, 10),
            ("bajativo", 4900, 10),
            ("ballantines azul", 15900, 10),
            ("ballantines negro", 16900, 10),
            ("ballantines wild", 16900, 10),
            ("benedictino", 1300, 10),
            ("bestia negra carmenere G reserva", 8900, 10),
            ("bestia roja cabernet g reserva", 8900, 10),
            ("blenders apple promo", 11900, 10),
            ("blenders promo honey", 11900, 10),
            ("bombay petaka", 8500, 10),
            ("botellon 120 cabernet", 4700, 10),
            ("botellon 120 merlot", 4700, 10),
            ("budweiser botellin", 6000, 10),
            ("budweiser botellin cero alcohol", 6500, 10),
            ("budweiser lata", 5900, 10),
            ("budweiser lata 710", 1500, 10),
            ("cachantun 2.5 lt", 1800, 10),
            ("cachantun 591", 1000, 10),
            ("cachantun azul 1.5", 1500, 10),
            ("cachantun negra 1.5", 1800, 10),
            ("campanario mango colado", 4500, 10),
            ("campanario sour", 4500, 10),
            ("canada dry 3lt", 2500, 10),
            ("capel ice variedad", 1000, 10),
            ("capel pisco sour 1 lt", 6900, 10),
            ("casillero del diablo fantastic sweet", 5900, 10),
            ("casillero del diablo cabernet", 5900, 10),
            ("casillero del diablo carmenere", 5900, 10),
            ("casillero del diablo fabulous red", 5900, 10),
            ("casillero del diablo merlot", 5900, 10),
            ("castillo de molina g reserva red blend", 9500, 10),
            ("castillo de molina g reserva merlot", 9500, 10),
            ("coca 1.5 lt", 2000, 10),
            ("coca 1 lt retornable", 1300, 10),
            ("coca 2 lt retornable", 2000, 10),
            ("coca 2.5 lt desechable original", 2500, 10),
            ("coca 3 lt zero retornable", 2500, 10),
            ("coca 3lt retornable", 2500, 10),
            ("coca 591", 1500, 10),
            ("coca ligth 2.5 lt desechable", 2500, 10),
            ("coca zero 2.5 lt desechable", 2500, 10),
            ("coctel mango 1 lt", 6900, 10),
            ("cono sur carmenere/naranjo", 5900, 10),
            ("cono sur chardonnay", 5900, 10),
            ("cono sur morado carmenere", 5900, 10),
            ("cono sur red blend reserva", 5900, 10),
            ("cono sur sauvignon blanc", 5900, 10),
            ("coors lata sixpack", 5900, 10),
            ("coors sixpack botellin", 6500, 10),
            ("corona 710", 1800, 10),
            ("corona botellin sixpack", 6500, 10),
            ("corona sixpack lata", 5500, 10),
            ("cristal 1.2 lt", 1500, 10),
            ("cristal x12 latas", 7900, 10),
            ("cristal lata 350cc sixpack", 4900, 10),
            ("cristal lata 470 sixpack", 5900, 10),
            ("cusqueña botellin sixpack", 5900, 10),
            ("diablo dark red", 8900, 10),
            ("diablo cabernet", 8900, 10),
            ("diablo velvet merlot", 8900, 10),
            ("dolbek 500 cc", 2300, 10),
            ("eristoff original 700cc promo", 9900, 10),
            ("eristoff black promo", 9900, 10),
            ("eristoff rojo/orange 700cc promo", 9900, 10),
            ("escudo 1.2 lt", 1500, 10),
            ("escudo lata 350cc", 4900, 10),
            ("escudo lata 470cc", 5700, 10),
            ("escudo silver 470cc sixpack", 4900, 10),
            ("sangrie emm", 8900, 10),
            ("exportación botellon frutal", 3900, 10),
            ("exportacion caja", 3500, 10),
            ("exportacion morado/merlot", 3900, 10),
            ("exportación naranjo/carmenere", 3900, 10),
            ("exportacion rojo/cabernet", 3900, 10),
            ("fanta 1.5 lt desechable", 2000, 10),
            ("fanta 2 lt retornable", 2000, 10),
            ("fanta 2.5 lt desechable", 2500, 10),
            ("fanta 3 lt desechable", 2500, 10),
            ("fanta 3 lt retornable", 2900, 10),
            ("fanta 591", 1500, 10),
            ("frangelico", 22500, 10),
            ("gato caja rojo 2lt", 4500, 10),
            ("gato caja vinoblanco", 4500, 10),
            ("gato chirimoya", 4500, 10),
            ("gato dulce/dorado", 4500, 10),
            ("gato caja azul 2lt", 4500, 10),
            ("gato rojo/azul", 3900, 10),
            ("gato rosé", 4500, 10),
            ("gato rosé 750cc", 3500, 10),
            ("gatorade", 1700, 10),
            ("gin bombay 750", 14500, 10),
            ("gin tanqueray bossa nova", 19500, 10),
            ("gin tanqueray london", 19500, 10),
            ("gin tanqueray sevilla", 19500, 10),
            ("gran torobayo 500", 3100, 10),
            ("grosso", 2900, 10),
            ("guallarauco 500cc", 1500, 10),
            ("guiligans", 16900, 10),
            ("heineken botellin cero", 7900, 10),
            ("heineken botellin sixpack", 6500, 10),
            ("heineken lata sixpack", 6500, 10),
            ("jack daniel 750cc", 29900, 10),
            ("jack daniels 1 lt", 34900, 10),
            ("james lyon honey", 7900, 10),
            ("james lyon rosado", 7900, 10),
            ("jhonnie walker 1 lt promo", 17900, 10),
            ("jhonnie walker 750 cc promo", 14900, 10),
            ("jhonnie walker blonde", 16900, 10),
            ("jugo del valle", 1800, 10),
            ("jugo guallarauco", 3500, 10),
            ("jugo wats", 1800, 10),
            ("kem xtreme 2lt", 2000, 10),
            ("kunstman lager sin alcohol fourpack", 7900, 10),
            ("kunstman miel 500cc", 2300, 10),
            ("kunstman pale lager 500cc", 2300, 10),
            ("kunstman torobayo 500cc", 2300, 10),
            ("kunstman torobayo fourpack", 8500, 10),
            ("kunstman torobayo sixpack", 11900, 10),
            ("lata coca", 1000, 10),
            ("lata fanta", 1000, 10),
            ("lata jack and coke", 2000, 10),
            ("lata sprite", 1000, 10),
            ("late harvest rosé", 3900, 10),
            ("lemon stone variedad", 5900, 10),
            ("lipton", 1500, 10),
            ("malpaso mango", 14900, 10),
            ("malpaso manzana", 14900, 10),
            ("malpaso vainilla", 14900, 10),
            ("manjar lucuma capel", 4900, 10),
            ("manquehuito", 3500, 10),
            ("marques cabernet", 10900, 10),
            ("marques merlot", 10900, 10),
            ("martini brut", 13500, 10),
            ("martini sin alcohol", 13500, 10),
            ("miller 710cc", 1800, 10),
            ("miller botellin", 7500, 10),
            ("misiones de rengo cabernet", 3500, 10),
            ("misiones de rengo cabernet reserva", 6900, 10),
            ("misiones de rengo carmenere", 3500, 10),
            ("misiones de rengo carmenere reserva", 6900, 10),
            ("misiones de rengo gran reserva", 6900, 10),
            ("misiones de rengo late harvest", 4500, 10),
            ("misiones de rengo merlot", 3500, 10),
            ("misiones de rengo merlot reserva", 6900, 10),
            ("misiones de rengo rosé", 4500, 10),
            ("misiones de rengo sauvignon blanc", 4500, 10),
            ("mistral ice variedad", 6900, 10),
            ("mistral nobel promo", 17500, 10),
            ("mistral normal promo", 11900, 10),
            ("mocca cream capel", 4900, 10),
            ("monster variedad", 1800, 10),
            ("morenita 470 sixpack", 5900, 10),
            ("odisea variedad", 1000, 10),
            ("papa tarro grande", 2500, 10),
            ("peruano mango", 5900, 10),
            ("peruano sour", 5900, 10),
            ("petaca ballantines", 5000, 10),
            ("petaca blenders", 4500, 10),
            ("petaca eristoff", 4500, 10),
            ("petaca grants", 4500, 10),
            ("petaca jhonny", 5000, 10),
            ("petaca white horse", 4900, 10),
            ("piña colada capel", 4900, 10),
            ("powerade", 1700, 10),
            ("redbull chica", 1700, 10),
            ("ron abuelo", 8900, 10),
            ("ron barcelo", 13900, 10),
            ("ron cabo viejo", 5900, 10),
            ("ron sierra morena", 5900, 10),
            ("royal 1.5 lt", 1500, 10),
            ("royal 710cc", 1500, 10),
            ("royal botellin sixpack", 6500, 10),
            ("royal lata sixpack", 6500, 10),
            ("ruta cocktail", 3900, 10),
            ("sandy mac", 15900, 10),
            ("santa emiliana cabernet", 4900, 10),
            ("santa emiliana merlot/morado", 4900, 10),
            ("santa helena 1lt", 2900, 10),
            ("santa helena 500 ml", 1900, 10),
            ("santa helena caja 2lt", 4500, 10),
            ("santa helena rosé", 4500, 10),
            ("sbx espumante", 8900, 10),
            ("schweppes ginger", 2000, 10),
            ("schweppes tonica", 2000, 10),
            ("score", 1500, 10),
            ("smirnoff", 13900, 10),
            ("sol 710cc", 1500, 10),
            ("sol botellin sixpack", 6500, 10),
            ("sol de cuba", 5500, 10),
            ("sprite 1.5 lt", 2000, 10),
            ("sprite 2 lt retornable", 2000, 10),
            ("sprite 3l retornable", 2500, 10),
            ("sprite 3lt", 2900, 10),
            ("sprite 591", 1500, 10),
            ("stella 710cc", 1500, 10),
            ("stella cero alcohol", 6500, 10),
            ("stella lata sixpack", 5900, 10),
            ("stella sixpack botellin", 6000, 10),
            ("tequila boolton", 9900, 10),
            ("tequila cazadores", 7500, 10),
            ("tequila el comandante", 6900, 10),
            ("tequila josé cuervo", 19900, 10),
            ("tequila potrero", 7900, 10),
            ("tocornal blanco", 3900, 10),
            ("tocornal tinto", 3900, 10),
            ("todo de piedra cabernet 2020", 16900, 10),
            ("todo de piedra merlot gran reserva 2022", 12900, 10),
            ("tofee cream capel", 4900, 10),
            ("toro de piedra carmenere reserva 2022", 7900, 10),
            ("toro de piedra sauvignon blanc", 7900, 10),
            ("undurraga pinot cabernet", 4500, 10),
            ("undurraga pinot merlot", 4500, 10),
            ("valdivieso brut", 8500, 10),
            ("viñamar brut", 8900, 10),
            ("viñamar ice", 10900, 10),
            ("viñamar moscato", 8900, 10),
            ("vodka pl", 5500, 10),
            ("volcanes lata", 1000, 10),
            ("white horse", 14900, 10),
            ("campanario sour 1lt", 5500, 10),
            ("campanario mango sour 1 lt", 5500, 10),
            ("heineken x18", 15900, 10),
            ("cristal x24 latas", 14500, 10),
            ("becker lata x18", 7900, 10),
            ("horcon quemado 1 año", 13900, 10),
            ("alto del cafe roble del sur", 11900, 10),
            ("menta mitjans", 4900, 10),
            ("manzanilla mitjans", 4900, 10),
            ("cacao", 4900, 10),
            ("anis", 4900, 10),
            ("amareto mitjans", 4900, 10),
            ("buchanans deluxe whisky solo", 25900, 10),
            ("jameson whisky", 19900, 10),
            ("tequila olmeca", 16900, 10),
            ("gin kantal", 14900, 10),
            ("fernet branca", 12900, 10),
            ("jhonnie negro SIN PROMO", 29900, 10),
            ("corona cero alcohol", 8900, 10),
        ]
        
        creados = 0
        actualizados = 0
        
        for nombre, precio, stock in productos_data:
            producto, created = Producto.objects.get_or_create(
                nombre=nombre,
                defaults={'precio': precio, 'stock': stock}
            )
            if not created:
                producto.precio = precio
                producto.stock = stock
                producto.save()
                actualizados += 1
            else:
                creados += 1
        
        self.stdout.write(
            self.style.SUCCESS(
                f'✓ Se crearon {creados} productos nuevos\n'
                f'✓ Se actualizaron {actualizados} productos existentes'
            )
        )

